# 测试计划：验证全系统功能

## 1. 后端API测试

### 1.1 配置服务测试
- ✅ 测试 GET `/api/configs/` - 获取配置信息
- ✅ 测试 GET `/api/configs/llm/` - 获取LLM配置
- ✅ 测试 GET `/api/configs/embedding/` - 获取embedding配置

### 1.2 提示词管理测试
- ✅ 测试 POST `/api/prompts/` - 创建新提示词
- ✅ 测试 GET `/api/prompts/` - 获取所有提示词
- ✅ 测试 GET `/api/prompts/{prompt_id}/` - 获取单个提示词
- ✅ 测试 PUT `/api/prompts/{prompt_id}/` - 更新提示词
- ✅ 测试 DELETE `/api/prompts/{prompt_id}/` - 删除提示词

### 1.3 版本管理测试
- ✅ 测试 GET `/api/prompts/{prompt_id}/versions/` - 获取提示词版本
- ✅ 测试 GET `/api/prompts/{prompt_id}/versions/{version_id}/` - 获取单个版本
- ✅ 测试 GET `/api/prompts/{prompt_id}/versions/{version_id}/diff/` - 获取版本差异

### 1.4 搜索功能测试
- ✅ 测试 GET `/api/search/` - 搜索提示词
- ✅ 测试 GET `/api/search/similar/` - 相似提示词搜索

### 1.5 Token管理测试
- ✅ 测试 POST `/api/tokens/` - 创建Token
- ✅ 测试 GET `/api/tokens/` - 获取所有Token
- ✅ 测试 GET `/api/tokens/{token_id}/` - 获取单个Token
- ✅ 测试 PUT `/api/tokens/{token_id}/` - 更新Token
- ✅ 测试 DELETE `/api/tokens/{token_id}/` - 删除Token

## 2. LLM服务测试

### 2.1 生成服务测试
- ✅ 测试 POST `/api/llm/generate/` - 使用GLM-4-Flash生成文本

### 2.2 Embedding服务测试
- ✅ 测试 POST `/api/llm/embedding/` - 生成文本嵌入

## 3. 前端服务测试

### 3.1 页面访问测试
- ✅ 访问 `http://localhost:3000` - 验证前端页面加载

### 3.2 功能测试
- ✅ 测试提示词列表展示
- ✅ 测试提示词创建功能
- ✅ 测试提示词编辑功能
- ✅ 测试提示词版本管理
- ✅ 测试提示词搜索功能

## 4. 集成测试

### 4.1 YAML配置测试
- ✅ 验证配置文件加载
- ✅ 验证配置文件更新
- ✅ 验证配置服务与LLM服务集成

### 4.2 ChromaDB集成测试
- ✅ 验证向量数据库连接
- ✅ 验证向量存储功能
- ✅ 验证相似性搜索功能

## 5. 测试方法

1. 使用 `curl` 命令测试后端API
2. 使用浏览器访问前端页面测试UI功能
3. 使用Swagger UI (`http://localhost:8000/docs`) 交互式测试API
4. 验证日志输出，确保无错误信息
5. 检查数据库记录，确保数据持久化正常

## 6. 预期结果

- 所有API返回200 OK状态码
- LLM生成服务能够返回有效响应
- Embedding服务能够生成向量
- 前端页面能够正常加载和交互
- 所有功能模块能够正常协同工作

## 7. 测试工具

- `curl` - 命令行HTTP客户端
- 浏览器 - 前端UI测试
- Swagger UI - API文档和测试
- `sqlite3` - 数据库验证

## 8. 测试顺序

1. 配置服务测试
2. LLM和Embedding服务测试
3. 提示词管理测试
4. 版本管理测试
5. 搜索功能测试
6. Token管理测试
7. 前端功能测试
8. 集成测试

## 9. 风险点

- 大模型API调用可能因网络问题或API密钥无效而失败
- ChromaDB服务可能未启动
- 数据库连接可能出现问题
- 前端跨域请求可能失败

## 10. 验证标准

- 所有测试用例通过
- 无错误日志输出
- 数据能够正常持久化
- 功能模块能够正常协同工作
- 前端页面能够正常交互

## 11. 测试报告

测试完成后，将生成详细的测试报告，包括：
- 测试用例执行结果
- 错误信息和解决方案
- 性能测试结果（可选）
- 改进建议（可选）